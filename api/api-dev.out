
> api@0.1.0 dev /Users/dmitrii.malakhov/git/evm/api
> tsx watch src/index.ts

Migration error (may be safe to ignore if migrations are already applied): DrizzleError: Failed to run the query 'CREATE TABLE IF NOT EXISTS `iterations` (
  `id` text PRIMARY KEY NOT NULL,
  `name` text NOT NULL,
  `starts_at` integer NOT NULL,
  `ends_at` integer NOT NULL,
  `total_weeks` integer NOT NULL DEFAULT 6,
  `current_week` integer NOT NULL DEFAULT 1
);

ALTER TABLE `levels` ADD COLUMN `iteration_id` text REFERENCES `iterations`(`id`) ON DELETE SET NULL;

DROP INDEX IF EXISTS `levels_week_idx`;
CREATE UNIQUE INDEX IF NOT EXISTS `levels_iteration_week_idx` ON `levels` (`iteration_id`, `week`);

ALTER TABLE `team_progress` ADD COLUMN `total_points` integer NOT NULL DEFAULT 0;
ALTER TABLE `team_progress` ADD COLUMN `completed_weeks` text NOT NULL DEFAULT '[]';
ALTER TABLE `team_progress` ADD COLUMN `weekly_stats` text NOT NULL DEFAULT '[]';

CREATE TABLE IF NOT EXISTS `user_week_progress` (
  `id` text PRIMARY KEY NOT NULL,
  `user_id` text NOT NULL,
  `iteration_id` text NOT NULL,
  `week` integer NOT NULL,
  `completed_tasks` text NOT NULL DEFAULT '[]',
  `points_earned` integer NOT NULL DEFAULT 0,
  `is_completed` integer NOT NULL DEFAULT 0,
  `finished_at` integer,
  `key_id` text,
  `title` text,
  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE,
  FOREIGN KEY (`iteration_id`) REFERENCES `iterations`(`id`) ON DELETE CASCADE
);

CREATE UNIQUE INDEX IF NOT EXISTS `user_week_iteration_idx` ON `user_week_progress` (`user_id`, `iteration_id`, `week`);
'
    at BetterSQLiteSession.run (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:271:10)
    at SQLiteSyncDialect.migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/dialect.ts:849:15)
    ... 4 lines matching cause stack trace ...
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5) {
  cause: RangeError: The supplied SQL string contains more than one statement
      at Database.prepare (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/better-sqlite3@11.10.0/node_modules/better-sqlite3/lib/methods/wrappers.js:5:21)
      at BetterSQLiteSession.prepareQuery (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/better-sqlite3/session.ts:60:28)
      at BetterSQLiteSession.prepareOneTimeQuery (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:250:15)
      at BetterSQLiteSession.run (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:269:16)
      at SQLiteSyncDialect.migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/dialect.ts:849:15)
      at migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/better-sqlite3/migrator.ts:10:13)
      at <anonymous> (/Users/dmitrii.malakhov/git/evm/api/src/db/client.ts:43:9)
      at ModuleJob.run (node:internal/modules/esm/module_job:271:25)
      at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:578:26)
      at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)
}
node:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
9:26:36 PM [tsx] change in ./src/db/client.ts Rerunning...
cMigration error (may be safe to ignore if migrations are already applied): DrizzleError: Failed to run the query 'CREATE TABLE IF NOT EXISTS `iterations` (
  `id` text PRIMARY KEY NOT NULL,
  `name` text NOT NULL,
  `starts_at` integer NOT NULL,
  `ends_at` integer NOT NULL,
  `total_weeks` integer NOT NULL DEFAULT 6,
  `current_week` integer NOT NULL DEFAULT 1
);

ALTER TABLE `levels` ADD COLUMN `iteration_id` text REFERENCES `iterations`(`id`) ON DELETE SET NULL;

DROP INDEX IF EXISTS `levels_week_idx`;
CREATE UNIQUE INDEX IF NOT EXISTS `levels_iteration_week_idx` ON `levels` (`iteration_id`, `week`);

ALTER TABLE `team_progress` ADD COLUMN `total_points` integer NOT NULL DEFAULT 0;
ALTER TABLE `team_progress` ADD COLUMN `completed_weeks` text NOT NULL DEFAULT '[]';
ALTER TABLE `team_progress` ADD COLUMN `weekly_stats` text NOT NULL DEFAULT '[]';

CREATE TABLE IF NOT EXISTS `user_week_progress` (
  `id` text PRIMARY KEY NOT NULL,
  `user_id` text NOT NULL,
  `iteration_id` text NOT NULL,
  `week` integer NOT NULL,
  `completed_tasks` text NOT NULL DEFAULT '[]',
  `points_earned` integer NOT NULL DEFAULT 0,
  `is_completed` integer NOT NULL DEFAULT 0,
  `finished_at` integer,
  `key_id` text,
  `title` text,
  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE,
  FOREIGN KEY (`iteration_id`) REFERENCES `iterations`(`id`) ON DELETE CASCADE
);

CREATE UNIQUE INDEX IF NOT EXISTS `user_week_iteration_idx` ON `user_week_progress` (`user_id`, `iteration_id`, `week`);
'
    at BetterSQLiteSession.run (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:271:10)
    at SQLiteSyncDialect.migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/dialect.ts:849:15)
    ... 4 lines matching cause stack trace ...
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5) {
  cause: RangeError: The supplied SQL string contains more than one statement
      at Database.prepare (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/better-sqlite3@11.10.0/node_modules/better-sqlite3/lib/methods/wrappers.js:5:21)
      at BetterSQLiteSession.prepareQuery (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/better-sqlite3/session.ts:60:28)
      at BetterSQLiteSession.prepareOneTimeQuery (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:250:15)
      at BetterSQLiteSession.run (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:269:16)
      at SQLiteSyncDialect.migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/dialect.ts:849:15)
      at migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/better-sqlite3/migrator.ts:10:13)
      at <anonymous> (/Users/dmitrii.malakhov/git/evm/api/src/db/client.ts:43:9)
      at ModuleJob.run (node:internal/modules/esm/module_job:271:25)
      at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:578:26)
      at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)
}
node:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
9:40:27 PM [tsx] change in ./src/db/client.ts Rerunning...
cnode:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         9:26:36 PM [tsx] change in ./src/db/client.ts Rerunning...
cnode:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
9:40:27 PM [tsx] change in ./src/db/client.ts Rerunning...
cnode:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  [0mGET /health [32m200[0m 1.200 ms - 15[0m
[0mGET /health [32m200[0m 0.157 ms - 15[0m
[0mGET /features [32m200[0m 2.072 ms - 47[0m
[0mPOST /uploads [33m401[0m 0.428 ms - 66[0m
[0mPOST /auth/login [32m200[0m 4.557 ms - 128[0m
[0mGET /me [36m304[0m 0.849 ms - -[0m
[0mGET /features [36m304[0m 0.215 ms - -[0m
[0mGET /teams/t1 [36m304[0m 1.323 ms - -[0m
[0mGET /teams/t1/chat [36m304[0m 0.849 ms - -[0m
[0mGET /teams/t1 [36m304[0m 0.407 ms - -[0m
[0mGET /teams/t1/ideas [36m304[0m 1.128 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 1.351 ms - -[0m
[0mGET /levels/current [36m304[0m 1.096 ms - -[0m
[0mGET /teams/t1/ideas [36m304[0m 0.703 ms - -[0m
[0mGET /teams/t1/chat [36m304[0m 0.585 ms - -[0m
[0mGET /levels/current [36m304[0m 0.812 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.330 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.395 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.371 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.261 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.281 ms 9:26:36 PM [tsx] change in ./src/db/client.ts Rerunning...
cMigration error (may be safe to ignore if migrations are already applied): DrizzleError: Failed to run the query 'CREATE TABLE IF NOT EXISTS `iterations` (
  `id` text PRIMARY KEY NOT NULL,
  `name` text NOT NULL,
  `starts_at` integer NOT NULL,
  `ends_at` integer NOT NULL,
  `total_weeks` integer NOT NULL DEFAULT 6,
  `current_week` integer NOT NULL DEFAULT 1
);

ALTER TABLE `levels` ADD COLUMN `iteration_id` text REFERENCES `iterations`(`id`) ON DELETE SET NULL;

DROP INDEX IF EXISTS `levels_week_idx`;
CREATE UNIQUE INDEX IF NOT EXISTS `levels_iteration_week_idx` ON `levels` (`iteration_id`, `week`);

ALTER TABLE `team_progress` ADD COLUMN `total_points` integer NOT NULL DEFAULT 0;
ALTER TABLE `team_progress` ADD COLUMN `completed_weeks` text NOT NULL DEFAULT '[]';
ALTER TABLE `team_progress` ADD COLUMN `weekly_stats` text NOT NULL DEFAULT '[]';

CREATE TABLE IF NOT EXISTS `user_week_progress` (
  `id` text PRIMARY KEY NOT NULL,
  `user_id` text NOT NULL,
  `iteration_id` text NOT NULL,
  `week` integer NOT NULL,
  `completed_tasks` text NOT NULL DEFAULT '[]',
  `points_earned` integer NOT NULL DEFAULT 0,
  `is_completed` integer NOT NULL DEFAULT 0,
  `finished_at` integer,
  `key_id` text,
  `title` text,
  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE,
  FOREIGN KEY (`iteration_id`) REFERENCES `iterations`(`id`) ON DELETE CASCADE
);

CREATE UNIQUE INDEX IF NOT EXISTS `user_week_iteration_idx` ON `user_week_progress` (`user_id`, `iteration_id`, `week`);
'
    at BetterSQLiteSession.run (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:271:10)
    at SQLiteSyncDialect.migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/dialect.ts:849:15)
    ... 4 lines matching cause stack trace ...
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5) {
  cause: RangeError: The supplied SQL string contains more than one statement
      at Database.prepare (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/better-sqlite3@11.10.0/node_modules/better-sqlite3/lib/methods/wrappers.js:5:21)
      at BetterSQLiteSession.prepareQuery (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/better-sqlite3/session.ts:60:28)
      at BetterSQLiteSession.prepareOneTimeQuery (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:250:15)
      at BetterSQLiteSession.run (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/session.ts:269:16)
      at SQLiteSyncDialect.migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/sqlite-core/dialect.ts:849:15)
      at migrate (/Users/dmitrii.malakhov/git/evm/api/node_modules/.pnpm/drizzle-orm@0.44.7_better-sqlite3@11.10.0/node_modules/src/better-sqlite3/migrator.ts:10:13)
      at <anonymous> (/Users/dmitrii.malakhov/git/evm/api/src/db/client.ts:43:9)
      at ModuleJob.run (node:internal/modules/esm/module_job:271:25)
      at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:578:26)
      at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)
}
node:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_qu[0mGET /admin/levels [36m304[0m 1.855 ms - -[0m
[0mGET /admin/metrics [36m304[0m 1.058 ms - -[0m
[0mGET /admin/iterations [36m304[0m 3.987 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.280 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.449 ms - -[0m
[0mGET /admin/iterations9:40:27 PM [tsx] change in ./src/db/client.ts Rerunning...
cnode:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
GET /analytics/top-users?limit=10 [31m500[0m 0.496 ms - 41[0m
[0mGET /analytics/task-completion-by-week [31m500[0m 0.562 ms - 41[0m
[0mGET /analytics/task-completion [31m500[0m 0.333 ms - 41[0m
[0mGET /analytics/weekly-activity [31m500[0m 0.278 ms - 41[0m
[0mGET /analytics/top-users?limit=10 [31m500[0m 0.302 ms - 41[0m
[0mGET /analytics/task-completion-by-week [31m500[0m 0.372 ms - 41[0m
[0mGET /analytics/user-progress [31m500[0m 0.491 ms - 41[0m
[0mGET /levels/current [36m304[0m 1.291 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 1.374 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.646 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.569 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.695 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.629 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.325 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.317 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.407 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.209 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.388 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.268 ms - -[0m
[0mPOST /uploads [32m200[0m 13.284 ms - 332[0m
[0mPOST /tasks/08f3aea0-2bea-489b-9fb5-ea28168d1853/submit [31m500[0m 3.105 ms - 61[0m
[0mGET /admin/levels [36m304[0m 0.612 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.374 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.371 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.331 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.985 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.329 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 1.165 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 1.161 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 1.030 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.836 ms - -[0m
[0mGET /admin/moderation/submissions [32m200[0m 0.481 ms - 1648[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.382 ms - -[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 2.031 ms - 1941903[0m
[0mGET /analytics/task-completion [31m500[0m 0.672 ms - 41[0m
[0mGET /analytics/user-progress [31m500[0m 0.344 ms - 41[0m
[0mGET /analytics/task-completion [31m500[0m 0.333 ms - 41[0m
[0mGET /analytics/weekly-activity [31m500[0m 0.309 ms - 41[0m
[0mGET /analytics/top-users?limit=10 [31m500[0m 0.509 ms - 41[0m
[0mGET /analytics/task-completion-by-week [31m500[0m 0.344 ms - 41[0m
[0mGET /analytics/weekly-activity [31m500[0m 0.295 ms - 41[0m
[0mGET /analytics/top-users?limit=10 [31m500[0m 0.387 ms - 41[0m
[0mGET /analytics/user-progress [31m500[0m 0.549 ms - 41[0m
[0mGET /analytics/task-completion-by-week [31m500[0m 0.540 ms - 41[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 0.834 ms - 1941903[0m
[0mGET /health [32m200[0m 0.123 ms - 15[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 2.443 ms - 1941903[0m
[0mGET /levels/current [36m304[0m 2.380 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.627 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.514 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [32m200[0m 0.628 ms - 494[0m
[0mGET /levels/week/2 [36m304[0m 0.511 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.477 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.251 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.198 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.192 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.160 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.282 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.436 ms - -[0m
[0mGET /me [36m304[0m 1.927 ms - -[0m
[0mGET /features [36m304[0m 0.466 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.592 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.531 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.309 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.254 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.281 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.198 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.490 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.268 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.728 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.365 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.345 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.181 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.406 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.219 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.420 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.779 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.651 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.593 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 1.091 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.621 ms - -[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 0.705 ms - 1941903[0m
[0mGET /analytics/task-completion [32m200[0m 1.325 ms - 2[0m
[0mGET /analytics/weekly-activity [32m200[0m 0.938 ms - 2[0m
[0mGET /analytics/top-users?limit=10 [32m200[0m 0.675 ms - 2[0m
[0mGET /analytics/user-progress [32m200[0m 0.362 ms - 2[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.333 ms - -[0m
[0mGET /analytics/task-completion-by-week [32m200[0m 0.458 ms - 2[0m
[0mGET /analytics/task-completion [36m304[0m 0.657 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.344 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.387 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.391 ms - -[0m
[0mPOST /admin/iterations/iter-2025-11/current-week [32m200[0m 7.096 ms - 194[0m
[0mGET /admin/iterations [32m200[0m 0.715 ms - 196[0m
[0mGET /admin/levels [36m304[0m 0.344 ms - -[0m
[0mGET /levels/current [32m200[0m 0.836 ms - 599[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.371 ms - -[0m
[0mGET /levels/week/2 [32m200[0m 0.581 ms - 437[0m
[0mGET /teams/t1/progress [36m304[0m 0.491 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.512 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [32m200[0m 0.366 ms - 149[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.315 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.228 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.254 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.257 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.375 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.352 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.383 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.198 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.161 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.197 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.272 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.288 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.487 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.395 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.375 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.531 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.494 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.645 ms - -[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 0.378 ms - 1941903[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.408 ms - -[0m
[0mGET /analytics/task-completion [36m304[0m 0.443 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.632 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.264 ms - -[0m
[0mGET /analytics/task-completion [36m304[0m 0.375 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.415 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.355 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.249 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.298 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.467 ms - -[0m
[0mGET /feed [36m304[0m 0.496 ms - -[0m
[0mGET /feed [36m304[0m 0.299 ms - -[0m
[0mGET /feed [36m304[0m 0.310 ms - -[0m
[0mGET /feed [36m304[0m 0.243 ms - -[0m
[0mGET /feed [36m304[0m 0.438 ms - -[0m
[0mGET /feed [36m304[0m 0.212 ms - -[0m
[0mGET /levels/current [36m304[0m 0.682 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.422 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.325 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.498 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.535 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.576 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.234 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.414 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.208 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.184 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.521 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.494 ms - -[0m
[0mGET /me [36m304[0m 0.334 ms - -[0m
[0mGET /features [36m304[0m 0.314 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.461 ms - -[0m
[0mGET /levels/week/2 [36m304[0m 0.475 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.269 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.298 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.186 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.208 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.342 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.353 ms - -[0m
[0mPOST /auth/login [32m200[0m 3.287 ms - 128[0m
[0mGET /me [36m304[0m 0.677 ms - -[0m
[0mGET /features [36m304[0m 0.354 ms - -[0m
[0mGET /teams/t1 [36m304[0m 0.292 ms - -[0m
[0mGET /teams/t1/ideas [36m304[0m 0.589 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.277 ms - -[0m
[0mGET /levels/current [36m304[0m 0.954 ms - -[0m
[0mGET /teams/t1/chat [36m304[0m 0.452 ms - -[0m
[0mGET /teams/t1/ideas [36m304[0m 0.551 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.313 ms - -[0m
[0mGET /levels/current [36m304[0m 0.830 ms - -[0m
[0mGET /teams/t1 [36m304[0m 0.227 ms - -[0m
[0mGET /teams/t1/chat [36m304[0m 0.295 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.265 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.715 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.240 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.340 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.298 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.311 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.753 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.205 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.172 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.592 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.627 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.786 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 1.747 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.384 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.570 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.845 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.669 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 1.201 ms - -[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 0.696 ms - 1941903[0m
[0mGET /analytics/task-completion [36m304[0m 0.701 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.579 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.698 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.330 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.501 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.415 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 1.024 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.423 ms - -[0m
[0mGET /analytics/task-completion [36m304[0m 0.613 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.537 ms - -[0m
[0mGET /levels/current [36m304[0m 0.590 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.436 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.249 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.348 ms - -[0m
[0mGET /levels/week/1 [32m200[0m 0.741 ms - 599[0m
[0mGET /levels/week/1 [36m304[0m 0.469 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.247 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.221 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.215 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.235 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.322 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.240 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.587 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.575 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.335 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.264 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.233 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.239 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.751 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.880 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.675 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.581 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.372 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.573 ms - -[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 0.489 ms - 1941903[0m
[0mGET /analytics/task-completion [36m304[0m 0.786 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.880 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.471 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.590 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.369 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.448 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.470 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.260 ms - -[0m
[0mGET /analytics/task-completion [36m304[0m 0.342 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.235 ms - -[0m
[0mPOST /admin/iterations/iter-2025-11/current-week [32m200[0m 2.523 ms - 194[0m
[0mGET /admin/iterations [36m304[0m 0.596 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.553 ms - -[0m
[0mPOST /admin/iterations/iter-2025-11/current-week [32m200[0m 4.116 ms - 194[0m
[0mGET /admin/iterations [32m200[0m 0.587 ms - 196[0m
[0mGET /admin/levels [36m304[0m 0.508 ms - -[0m
[0mGET /levels/current [32m200[0m 1.069 ms - 437[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.372 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.303 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.375 ms - -[0m
[0mGET /levels/week/1 [32m200[0m 0.468 ms - 599[0m
[0mGET /levels/week/1 [36m304[0m 0.461 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.248 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.305 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.260 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.315 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.356 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.310 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.468 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.316 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.394 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.243 ms - -[0m
[0mGET /admin/metrics [36m304[0m 0.726 ms - -[0m
[0mGET /admin/iterations [36m304[0m 0.436 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.794 ms - -[0m
[0mGET /admin/levels/lvl3/tasks [36m304[0m 0.729 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.690 ms - -[0m
[0mGET /admin/levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.934 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.758 ms - -[0m
[0mGET /admin/moderation/submissions [36m304[0m 0.601 ms - -[0m
[0mGET /uploads/tasks/ChatGPT%20Image%2010%20%C3%90%C2%BD%C3%90%C2%BE%C3%91%C2%8F%C3%90%C2%B1.%202025%20%C3%90%C2%B3.,%2017_08_56-1762972061646-244709307.png [32m200[0m 0.874 ms - 1941903[0m
[0mGET /analytics/task-completion [36m304[0m 0.565 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.470 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.530 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.466 ms - -[0m
[0mGET /analytics/task-completion [36m304[0m 0.475 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.439 ms - -[0m
[0mGET /analytics/weekly-activity [36m304[0m 0.272 ms - -[0m
[0mGET /analytics/top-users?limit=10 [36m304[0m 0.309 ms - -[0m
[0mGET /analytics/task-completion-by-week [36m304[0m 0.370 ms - -[0m
[0mGET /analytics/user-progress [36m304[0m 0.335 ms - -[0m
[0mPOST /admin/iterations/iter-2025-11/current-week [32m200[0m 2.609 ms - 194[0m
[0mGET /admin/iterations [36m304[0m 0.789 ms - -[0m
[0mGET /admin/levels [36m304[0m 0.740 ms - -[0m
[0mGET /levels/current [36m304[0m 0.797 ms - -[0m
[0mGET /levels/10d47e33-c1d0-4768-8395-4738e0b7621d/tasks [36m304[0m 0.384 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.361 ms - -[0m
[0mGET /tasks/submissions?taskIds=27cf65a9-bf22-4447-b7f9-7905c1274412,08f3aea0-2bea-489b-9fb5-ea28168d1853 [36m304[0m 0.438 ms - -[0m
[0mGET /levels/week/1 [36m304[0m 0.414 ms - -[0m
[0mGET /levels/week/1 [36m304[0m 0.323 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.258 ms - -[0m
[0mGET /levels/lvl3/tasks [36m304[0m 0.259 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.233 ms - -[0m
[0mGET /teams/t1/progress [36m304[0m 0.149 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.353 ms - -[0m
[0mGET /tasks/submissions?taskIds=taskA,taskB [36m304[0m 0.320 ms - -[0m
9:40:27 PM [tsx] change in ./src/db/client.ts Restarting...
cnode:events:496
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use 0.0.0.0:4000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at node:net:2203:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1973:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 4000
}

Node.js v22.14.0
